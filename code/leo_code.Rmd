---
title: "fish-in-space"
author: "Leonardo Feitosa"
date: "04/04/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(rnaturalearth)
library(sf)
library(here)
library(tmap)
library(janitor)
library(tmaptools)
```

```{r}
# Set directories
basedir <- "G:/Meu Drive/fish_mgmt_areas/data"
indir <- file.path(basedir, "ecuador", "raw")
outdir <- file.path(basedir, "ecuador", "processed")
plotdir <- "figures"
```


```{r}
# read in the data
df_orig_raw <- readRDS(file.path(coldir, "Colombia_Shrimp_Fisheries_Areas.Rds")) %>% 
  clean_names()

ecuador_shp <- st_read(file.path(indir, "PESCA_ARPON.shp")) %>% 
  clean_names()

# rnaturalearth data
world <- ne_countries(scale = "medium", returnclass = "sf")
```

```{r}
# Set coordinate system
wgs84 <- st_crs("+proj=longlat +datum=WGS84")
```

```{r}
# Inspect attribute table
df <- df_orig_raw %>% 
  st_drop_geometry() 
```

```{r}
df_final <- ecuador_shp %>%   
  mutate(dataset = "",
         dataset_esp = "",
        country = "Chile",
        ocean = "Pacific",
        region = "Chile's coast",
        agency = "SubsecretarÃ­a de Pesca y Acuicultura",
        zone_id = as.character(peso),
        zone_name = nombre,
        type = "management",
        species = "multi-species",
        species_list = NA,
        source = "https://www.ide.cl/index.php/oceanos-y-costa/item/1492-espacios-costeros-marinos-para-pueblos-originarios-ecmpo",
        citation = "Ministerio de Bienes Nacionales. (06 July 2021). Marine coastal spaces for native peoples. https://www.ide.cl/. Retrieved 28 July 2022: https://www.ide.cl/index.php/oceanos-y-costa/item/1492-espacios-costeros-marinos-para-pueblos-originarios-ecmpo",
        created = "2021-07-061") %>% 
  select(dataset,dataset_esp, country, ocean, region, agency, zone_id, zone_name, type, species, species_list, source, citation, created) %>% 
 st_transform(wgs84)
```

```{r}
# Create output RDS file
saveRDS(df_final, file = file.path(outdir, "Chile_Marine_coastal_spaces_for_native_peoples.Rds"))
```

```{r}
ggplot() +
#  geom_sf(data = world) +
  geom_sf(data = chile_shp, fill= NA) 
  coord_sf(xlim = c(-160, -155),
           ylim = c(18, 24)) 
```

```{r}
stur_1 <- st_read(file.path(indir, "SturgeonAtlantic_AtlanticSubspecies_SouthAtlanticDPS_20170817.shp")) %>% 
  clean_names()   

stur_2 <- st_read(file.path(indir, "SturgeonAtlantic_AtlanticSubspecies_NewYorkBightDPS_20170817.shp")) %>% 
  clean_names()  

stur_3 <- st_read(file.path(indir, "SturgeonAtlantic_AtlanticSubspecies_GulfofMaineDPS_20170817.shp")) %>% 
  clean_names()  

stur_4 <- st_read(file.path(indir, "SturgeonAtlantic_AtlanticSubspecies_CarolinaDPS_20170817.shp")) %>% 
  clean_names()  

wash_10 <- st_read(file.path(indir, "washington_state_fish_mgmt_areas10.shp")) %>% 
  clean_names()  

wash_12 <- st_read(file.path(indir, "washington_state_fish_mgmt_areas12.shp")) %>% 
  clean_names() 

wash_14 <- st_read(file.path(indir, "washington_state_fish_mgmt_areas14.shp")) %>% 
  clean_names()  

stur_all <- bind_rows(stur_1, stur_2, stur_3, stur_4) %>% 
   st_transform(wgs84)

stur_all_drop <- stur_all %>% 
  st_drop_geometry()
```


```{r}
costa_rica_atl <- readRDS(file.path(outdir, "Costa_Rica_Marine_Areas_of_Responsible_Fishing_Pacific.Rds"))

argentina <- st_zm(argentina, drop = TRUE, what = "ZM")

st_write(argentina, file.path(outdir, "Argentina_fisheries_management_areas.shp"))
```

